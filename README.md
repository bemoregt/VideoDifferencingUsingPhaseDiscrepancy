# Video Differencing Using Phase Discrepancy

이 프로젝트는 영상의 움직임을 감지하기 위해 프레임 간의 위상 불일치(Phase Discrepancy)를 사용한 새로운 접근 방식을 구현합니다. 일반적인 프레임 간 차분(Subtraction)과 푸리에 변환을 활용한 위상 불일치 방법을 비교합니다.

## 개요

이 코드는 다음과 같은 기능을 제공합니다:

1. 비디오에서 연속된 프레임 읽기
2. 프레임 간 일반적인 차분(Subtraction) 계산
3. 푸리에 변환을 사용한 위상 불일치(Phase Discrepancy) 계산
4. 두 방식의 결과를 나란히 비교하여 GIF로 저장

## 방법론

### 일반적인 프레임 차분
```
차분 = |프레임1 - 프레임2|
```

### 위상 불일치 방법
1. 두 프레임에 대해 푸리에 변환(FFT) 수행
2. 각 변환의 위상과 진폭 추출
3. 진폭 차이와 각 프레임의 위상을 결합한 복소수 생성
4. 역 푸리에 변환(IFFT) 적용
5. 결과의 절대값을 곱하여 최종 불일치 맵 생성

## 의존성

- OpenCV
- NumPy 
- imageio
- pathlib

## 사용 방법

```python
input_path = '입력_비디오_경로.mp4'
output_path = '출력_GIF_경로.gif'
process_video(input_path, output_path)
```

## 결과

출력 GIF는 두 부분으로 구성됩니다:
- 왼쪽: 일반적인 프레임 차분 결과
- 오른쪽: 위상 불일치 방법 결과

## 알고리즘 설명

이 알고리즘은 푸리에 도메인에서 두 이미지 간의 위상 불일치를 계산합니다:

1. 두 이미지(프레임)에 대해 2D FFT 수행
2. 각 FFT 결과에서 진폭과 위상 분리
3. 진폭 차이(amp1 - amp2)와 첫 번째 프레임의 위상으로 복소수 생성
4. 진폭 차이(amp2 - amp1)와 두 번째 프레임의 위상으로 복소수 생성
5. 두 복소수에 대해 역 FFT 수행
6. 역 FFT 결과의 절대값을 계산
7. 두 절대값의 원소별 곱(element-wise multiplication) 계산
8. 결과를 0-255 범위로 정규화

이 방법은 일반적인 프레임 차분과 달리 주파수 도메인의 정보를 활용하여 텍스처가 있는 영역이나 미묘한 변화에 더 민감하게 반응할 수 있습니다.